<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Yuri Sushis</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark">
        <a class="navbar-brand" style="padding-left: 9.312rem;" href="#">Yuri Sushis</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" style="text-align: center;margin-left: 10rem;" id="navbarNav">
          <ul class="navbar-nav ml-auto" style="padding-right: 19rem;">
            <li class="nav-item active">
              <a class="nav-link" href="#">INICÍO <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="#">CARDÁPIO</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="#">RESERVAR</a>
            </li>
          </ul>
        </div>
      </nav> <br><br><br><br><br><br><br><br>
      
     <div>
      <img src="assets/imgs/sushi2.png" class="img-fluid rounded float-right" style="margin-top: -14.8rem;" alt="Responsive image">
      <h1 style="padding-left: 9.312rem;">Sushi</h1><br>
      <p class="mb-0" style="padding-left: 9.312rem; opacity: 0.8;">Full control of what you use and pay for</p>
     </div> <br><br><br><br><br><br><br><br><br>
     

     <div class="triangulo"></div> <br><br><br> 

     <h1 class="text-center">Nosso cardápio</h1> <br><br><br> <br>
    
     <div class="album py-5">
      <div class="container" style="max-width: 1694px;">
        <div class="row">
          <div class="col-md-4">
            <div class="card mb-4 box-shadow" style="background-color:#101519">
              <img class="card-img-top" data-src="" alt="" style="height: 225px; width: 100%; display: block;" src="assets/imgs/combinados-variados.png" data-holder-rendered="true">
              <p class="card-text p-cards">Combinados variados</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card mb-4 box-shadow" style="background-color: #101519">
              <img class="card-img-top" data-src="" alt="" style="height: 225px; width: 100%; display: block;" src="assets/imgs/combinados-doces.png" data-holder-rendered="true">
              <p class="card-text p-cards">Combinados doces</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card mb-4 box-shadow" style="background-color: #101519">
              <img class="card-img-top" data-src="" alt="" style="height: 225px; width: 100%; display: block;" src="assets/imgs/barcas.png" data-holder-rendered="true">
              <p class="card-text p-cards">Barcas</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br> <br><br> <br>
    <h1 class="text-center">Reserva</h1>
    <br> <br>
    <p class="mb-0 text-center" style="opacity: 0.8;">Escolha uma data para experimentar nosso cardápio</p>
    <br><br>

    <!-- Modal de agendar reserva -->
    <div class="modal fade bd-example-modal-lg" style="padding-right: 0  !important ;" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" style="max-width: 938px; margin-top: 5rem;">
        <h1 class="text-center">Reserva</h1>
        <div class="modal-content" style="background: #D6A74F;">
          <div class="modal-body" style="padding: 10rem;">
            <form id="reservar_form">
              <input  value="RESERVA - YURI SUSHIS" type="hidden" name="subject"  />
              <input type="hidden" name="access_token" value="vo7yb330kpy1b3nnwbnc52nj" />
              <div class="form-group">
                <label for="exampleInputEmail1">Email</label>
                <input required type="email" name="reply_to" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="exemplo@gmail.com">
              </div>
              <div class="form-group">
                <label for="inputNomeCompleto">Nome Completo</label>
                <input required type="text" class="form-control" id="inputNomeCompleto" placeholder="Felipe Schorles">
              </div>
              <div class="row">
                <div class="col">
                  <label for="qtdPessoas">Quantidade de pessoas</label>
                  <select class="form-control" id="qtdPessoas">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="col">
                  <label for="data">Data e horário</label>
                  <input required type="date" id="data" class="form-control" >
                </div>
              </div>
              <div  style="border-top:0; margin-top: 16rem; margin-bottom: -8rem;" class="modal-footer justify-content-center">
                <button type="submit" onclick="sendEmail()" id="submit_form" type="submit" class="btn_agendar_modal justify-content-center">Agendar data</button>
                <button type="button" hidden data-toggle="modal" id="btn_modal_reserva_confirmada" data-target=".bd-example-modal-lg-confirmacao">
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de confirmação da reserva -->
    <div class="modal fade bd-example-modal-lg-confirmacao" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" style="max-width: 938px; margin-top: 5rem;">
        <h1 class="text-center">Reserva</h1>
        <div class="modal-content" style="background: #D6A74F;">
          <div class="modal-body" style="padding: 10rem;">
            <h1 class="text-center">Reserva feita com sucesso</h1>
            &nbsp<h2  style="color: #FFFFFF; opacity: 1;" class="text-center">Um email de confirmação foi enviado.</h2>
          </div>
          <div  style="border-top:0; margin-top: 6rem; margin-bottom: 1rem;" class="modal-footer justify-content-center">
            <button type="button" onclick="cardapio()" id="btn_ver_cardapio" type="submit" class="btn_agendar_modal justify-content-center">Ver cardápio</button>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center">
      <button type="button" data-toggle="modal" id="btn_modal_reservar" data-target=".bd-example-modal-lg" class="btn_agendar justify-content-center">Agendar data</button>

    </div>
    <br> <br><br> <br>  <br> <br><br> <br>

    <!-- <footer class="mastfoot mt-auto text-right"> -->
      <div class="desenho-cabecalho">
      </div>

      <div class="text-right cabecalho">
        <p class="text-right">Terms of Service || Privacy Policy</p>
      </div> 
    <!-- </footer>  -->
    <!-- <div class="eita">
      
    </div> -->
    <!-- <div class="eita2">
      
    </div> -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script>
      //update this with your js_form selector
      var form_id_js = "reservar_form";

      var data_js = {
          "access_token": "vo7yb330kpy1b3nnwbnc52nj"
      };
      function sendEmail(){
       // var form = document.getElementById("reservar_form");

        var request = new XMLHttpRequest();
        request.onreadystatechange = function() {
            if (request.readyState == 4 && request.status == 200) {
                js_onSuccess();
            } else
            if(request.readyState == 4) {
                js_onError(request.response);
            }
        };
        var pessoaText = " pessoa ";
        var name = document.getElementById("inputNomeCompleto").value;
        var pessoas = document.getElementById("qtdPessoas").value;
        var data = document.getElementById("data").value;
        var subject = document.querySelector("#" + form_id_js + " [name='subject']").value;
        var reply_to = document.querySelector("#" + form_id_js + " [name='reply_to']").value;
        
        if(reply_to != "" && data != "" && name != "" ){

          data_js['reply_to'] = reply_to;
          data_js['subject'] = subject;
          if(pessoas != "1"){
            pessoaText= " pessoas "
          }
          data_js['text'] = "Olá, "+name+ ". Sua reserva para "+pessoas+pessoaText+"foi feita com sucesso no dia "+data;

          var params = toParams(data_js);

          request.open("POST", "https://postmail.invotes.com/send", true);
          request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

          request.send(params);
        }

        return false;

      } 

      function js_onSuccess() {
        // remove this to avoid redirect
        document.getElementById("btn_modal_reservar").click();
        document.getElementById("btn_modal_reserva_confirmada").click();
      }
         
      function toParams(data_js) {
        var form_data = [];
        for ( var key in data_js ) {
            form_data.push(encodeURIComponent(key) + "=" + encodeURIComponent(data_js[key]));
        }

        return form_data.join("&");
      }

      var js_form = document.getElementById(form_id_js);
      
      js_form.addEventListener("submit", function (e) {
          e.preventDefault();
      });

      // function sendEmail(){
    //   Email.send({
    //         SecureToken : "3435E39A838F76B1FFF7ACA6E0E2A960AEC8656181B23B377467C222E826845E511E5EEFC82D34066DC882590B90289C",
    //         To : 'bruno.amatoz@hotmail.com',
    //         From : "bruno.amatoz@hotmail.com",
    //         Subject : "This is the subject",
    //         Body : "And this is the body"
    //     }).then(
    //       message => alert(message)
    //     );
    //   }
  
    </script>
  </body>
</html>